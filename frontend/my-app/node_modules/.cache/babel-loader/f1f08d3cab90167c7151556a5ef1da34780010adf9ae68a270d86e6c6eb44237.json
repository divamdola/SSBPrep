{"ast":null,"code":"import{LOGIN_REQUEST,LOGIN_SUCCESS,LOGIN_FAIL,CLEAR_ERRORS,REGISTER_USER_REQUEST,REGISTER_USER_SUCCESS,REGISTER_USER_FAIL,LOAD_USER_REQUEST,LOAD_USER_SUCCESS,LOAD_USER_FAIL,LOGOUT_SUCCESS,LOGOUT_FAIL}from\"../constants/userConstants\";const storedUser=localStorage.getItem(\"user\")?JSON.parse(localStorage.getItem(\"user\")):null;const initialState={user:storedUser,loading:false,isAuthenticated:!!storedUser,// ✅ Ensure it's defined properly\nerror:null};export const authReducer=function(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case LOGIN_REQUEST:case REGISTER_USER_REQUEST:case LOAD_USER_REQUEST:return{...state,loading:true};case LOGIN_SUCCESS:case REGISTER_USER_SUCCESS:case LOAD_USER_SUCCESS:localStorage.setItem(\"user\",JSON.stringify(action.payload));// Save user data\nreturn{...state,loading:false,isAuthenticated:true,user:action.payload};case LOGOUT_SUCCESS:localStorage.removeItem(\"user\");// Clear user data\nreturn{...initialState};case LOGIN_FAIL:case REGISTER_USER_FAIL:return{...state,loading:false,isAuthenticated:false,user:null,error:action.payload};case LOAD_USER_FAIL:return{...initialState,// ✅ Reset state when loading user fails\nerror:action.payload};case LOGOUT_FAIL:return{...state,error:action.payload};case CLEAR_ERRORS:return{...state,error:null};default:return state;}};","map":{"version":3,"names":["LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAIL","CLEAR_ERRORS","REGISTER_USER_REQUEST","REGISTER_USER_SUCCESS","REGISTER_USER_FAIL","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOAD_USER_FAIL","LOGOUT_SUCCESS","LOGOUT_FAIL","storedUser","localStorage","getItem","JSON","parse","initialState","user","loading","isAuthenticated","error","authReducer","state","arguments","length","undefined","action","type","setItem","stringify","payload","removeItem"],"sources":["C:/Users/divya/Desktop/Projects/SSBPrep/frontend/my-app/src/reducers/authReducer.js"],"sourcesContent":["import {\r\n    LOGIN_REQUEST,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    CLEAR_ERRORS,\r\n    REGISTER_USER_REQUEST,\r\n    REGISTER_USER_SUCCESS,\r\n    REGISTER_USER_FAIL,\r\n    LOAD_USER_REQUEST,\r\n    LOAD_USER_SUCCESS,\r\n    LOAD_USER_FAIL,\r\n    LOGOUT_SUCCESS,\r\n    LOGOUT_FAIL,\r\n  } from \"../constants/userConstants\";\r\n  \r\n  const storedUser = localStorage.getItem(\"user\")\r\n    ? JSON.parse(localStorage.getItem(\"user\"))\r\n    : null;\r\n  \r\n  const initialState = {\r\n    user: storedUser,\r\n    loading: false,\r\n    isAuthenticated: !!storedUser, // ✅ Ensure it's defined properly\r\n    error: null,\r\n  };\r\n  \r\n  export const authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n      case LOGIN_REQUEST:\r\n      case REGISTER_USER_REQUEST:\r\n      case LOAD_USER_REQUEST:\r\n        return {\r\n          ...state,\r\n          loading: true,\r\n        };\r\n  \r\n      case LOGIN_SUCCESS:\r\n      case REGISTER_USER_SUCCESS:\r\n      case LOAD_USER_SUCCESS:\r\n        localStorage.setItem(\"user\", JSON.stringify(action.payload)); // Save user data\r\n        return {\r\n          ...state,\r\n          loading: false,\r\n          isAuthenticated: true,\r\n          user: action.payload,\r\n        };\r\n      case LOGOUT_SUCCESS:\r\n        localStorage.removeItem(\"user\"); // Clear user data\r\n        return {\r\n          ...initialState,\r\n        };\r\n  \r\n      case LOGIN_FAIL:\r\n      case REGISTER_USER_FAIL:\r\n        return {\r\n          ...state,\r\n          loading: false,\r\n          isAuthenticated: false,\r\n          user: null,\r\n          error: action.payload,\r\n        };\r\n  \r\n      case LOAD_USER_FAIL:\r\n        return {\r\n          ...initialState, // ✅ Reset state when loading user fails\r\n          error: action.payload,\r\n        };\r\n  \r\n      case LOGOUT_FAIL:\r\n        return {\r\n          ...state,\r\n          error: action.payload,\r\n        };\r\n  \r\n      case CLEAR_ERRORS:\r\n        return {\r\n          ...state,\r\n          error: null,\r\n        };\r\n  \r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n  "],"mappings":"AAAA,OACIA,aAAa,CACbC,aAAa,CACbC,UAAU,CACVC,YAAY,CACZC,qBAAqB,CACrBC,qBAAqB,CACrBC,kBAAkB,CAClBC,iBAAiB,CACjBC,iBAAiB,CACjBC,cAAc,CACdC,cAAc,CACdC,WAAW,KACN,4BAA4B,CAEnC,KAAM,CAAAC,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC3CC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CACxC,IAAI,CAER,KAAM,CAAAG,YAAY,CAAG,CACnBC,IAAI,CAAEN,UAAU,CAChBO,OAAO,CAAE,KAAK,CACdC,eAAe,CAAE,CAAC,CAACR,UAAU,CAAE;AAC/BS,KAAK,CAAE,IACT,CAAC,CAED,MAAO,MAAM,CAAAC,WAAW,CAAG,QAAAA,CAAA,CAAkC,IAAjC,CAAAC,KAAK,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAGP,YAAY,IAAE,CAAAU,MAAM,CAAAH,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAE,SAAA,CACtD,OAAQC,MAAM,CAACC,IAAI,EACjB,IAAK,CAAA5B,aAAa,CAClB,IAAK,CAAAI,qBAAqB,CAC1B,IAAK,CAAAG,iBAAiB,CACpB,MAAO,CACL,GAAGgB,KAAK,CACRJ,OAAO,CAAE,IACX,CAAC,CAEH,IAAK,CAAAlB,aAAa,CAClB,IAAK,CAAAI,qBAAqB,CAC1B,IAAK,CAAAG,iBAAiB,CACpBK,YAAY,CAACgB,OAAO,CAAC,MAAM,CAAEd,IAAI,CAACe,SAAS,CAACH,MAAM,CAACI,OAAO,CAAC,CAAC,CAAE;AAC9D,MAAO,CACL,GAAGR,KAAK,CACRJ,OAAO,CAAE,KAAK,CACdC,eAAe,CAAE,IAAI,CACrBF,IAAI,CAAES,MAAM,CAACI,OACf,CAAC,CACH,IAAK,CAAArB,cAAc,CACjBG,YAAY,CAACmB,UAAU,CAAC,MAAM,CAAC,CAAE;AACjC,MAAO,CACL,GAAGf,YACL,CAAC,CAEH,IAAK,CAAAf,UAAU,CACf,IAAK,CAAAI,kBAAkB,CACrB,MAAO,CACL,GAAGiB,KAAK,CACRJ,OAAO,CAAE,KAAK,CACdC,eAAe,CAAE,KAAK,CACtBF,IAAI,CAAE,IAAI,CACVG,KAAK,CAAEM,MAAM,CAACI,OAChB,CAAC,CAEH,IAAK,CAAAtB,cAAc,CACjB,MAAO,CACL,GAAGQ,YAAY,CAAE;AACjBI,KAAK,CAAEM,MAAM,CAACI,OAChB,CAAC,CAEH,IAAK,CAAApB,WAAW,CACd,MAAO,CACL,GAAGY,KAAK,CACRF,KAAK,CAAEM,MAAM,CAACI,OAChB,CAAC,CAEH,IAAK,CAAA5B,YAAY,CACf,MAAO,CACL,GAAGoB,KAAK,CACRF,KAAK,CAAE,IACT,CAAC,CAEH,QACE,MAAO,CAAAE,KAAK,CAChB,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}