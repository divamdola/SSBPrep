{"ast":null,"code":"import { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAIL, CLEAR_ERRORS, REGISTER_USER_REQUEST, REGISTER_USER_SUCCESS, REGISTER_USER_FAIL, LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOAD_USER_FAIL, LOGOUT_SUCCESS, LOGOUT_FAIL, FORGOT_PASSWORD_REQUEST, FORGOT_PASSWORD_SUCCESS, FORGOT_PASSWORD_FAIL, NEW_PASSWORD_REQUEST, NEW_PASSWORD_SUCCESS, NEW_PASSWORD_FAIL } from \"../constants/userConstants\";\nconst storedUser = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : null;\nconst initialState = {\n  user: storedUser,\n  loading: false,\n  isAuthenticated: !!storedUser,\n  // ✅ Ensure it's defined properly\n  error: null\n};\nexport const authReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOGIN_REQUEST:\n    case REGISTER_USER_REQUEST:\n    case LOAD_USER_REQUEST:\n      return {\n        ...state,\n        loading: true\n      };\n    case LOGIN_SUCCESS:\n    case REGISTER_USER_SUCCESS:\n    case LOAD_USER_SUCCESS:\n      localStorage.setItem(\"user\", JSON.stringify(action.payload)); // Save user data\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: true,\n        user: action.payload\n      };\n    case LOGOUT_SUCCESS:\n      localStorage.removeItem(\"user\"); // Clear user data\n      return {\n        ...initialState\n      };\n    case LOGIN_FAIL:\n    case REGISTER_USER_FAIL:\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: false,\n        user: null,\n        error: action.payload\n      };\n    case LOAD_USER_FAIL:\n      return {\n        ...initialState,\n        // ✅ Reset state when loading user fails\n        error: action.payload\n      };\n    case LOGOUT_FAIL:\n      return {\n        ...state,\n        error: action.payload\n      };\n    case CLEAR_ERRORS:\n      return {\n        ...state,\n        error: null\n      };\n    default:\n      return state;\n  }\n};\nexport const forgotPasswordReducer = (state = {}, action) => {\n  switch (action.type) {\n    case FORGOT_PASSWORD_REQUEST:\n    case NEW_PASSWORD_REQUEST:\n      return {\n        ...state,\n        loading: true,\n        error: null\n      };\n    case FORGOT_PASSWORD_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        message: action.payload\n      };\n    case NEW_PASSWORD_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        user: action.payload.user,\n        success: action.payload\n      };\n    case FORGOT_PASSWORD_FAIL:\n    case NEW_PASSWORD_FAIL:\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    case CLEAR_ERRORS:\n      return {\n        ...state,\n        error: null,\n        message: null\n      };\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAIL","CLEAR_ERRORS","REGISTER_USER_REQUEST","REGISTER_USER_SUCCESS","REGISTER_USER_FAIL","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOAD_USER_FAIL","LOGOUT_SUCCESS","LOGOUT_FAIL","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAIL","NEW_PASSWORD_REQUEST","NEW_PASSWORD_SUCCESS","NEW_PASSWORD_FAIL","storedUser","localStorage","getItem","JSON","parse","initialState","user","loading","isAuthenticated","error","authReducer","state","action","type","setItem","stringify","payload","removeItem","forgotPasswordReducer","message","success"],"sources":["C:/Users/divya/Desktop/Projects/SSBPrep/frontend/my-app/src/reducers/userReducer.js"],"sourcesContent":["import {\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  CLEAR_ERRORS,\r\n  REGISTER_USER_REQUEST,\r\n  REGISTER_USER_SUCCESS,\r\n  REGISTER_USER_FAIL,\r\n  LOAD_USER_REQUEST,\r\n  LOAD_USER_SUCCESS,\r\n  LOAD_USER_FAIL,\r\n  LOGOUT_SUCCESS,\r\n  LOGOUT_FAIL,\r\n  FORGOT_PASSWORD_REQUEST,\r\n  FORGOT_PASSWORD_SUCCESS,\r\n  FORGOT_PASSWORD_FAIL,\r\n  NEW_PASSWORD_REQUEST,\r\n  NEW_PASSWORD_SUCCESS,\r\n  NEW_PASSWORD_FAIL,\r\n} from \"../constants/userConstants\";\r\n\r\nconst storedUser = localStorage.getItem(\"user\")\r\n  ? JSON.parse(localStorage.getItem(\"user\"))\r\n  : null;\r\n\r\nconst initialState = {\r\n  user: storedUser,\r\n  loading: false,\r\n  isAuthenticated: !!storedUser, // ✅ Ensure it's defined properly\r\n  error: null,\r\n};\r\n\r\nexport const authReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOGIN_REQUEST:\r\n    case REGISTER_USER_REQUEST:\r\n    case LOAD_USER_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n\r\n    case LOGIN_SUCCESS:\r\n    case REGISTER_USER_SUCCESS:\r\n    case LOAD_USER_SUCCESS:\r\n      localStorage.setItem(\"user\", JSON.stringify(action.payload)); // Save user data\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        isAuthenticated: true,\r\n        user: action.payload,\r\n      };\r\n    case LOGOUT_SUCCESS:\r\n      localStorage.removeItem(\"user\"); // Clear user data\r\n      return {\r\n        ...initialState,\r\n      };\r\n\r\n    case LOGIN_FAIL:\r\n    case REGISTER_USER_FAIL:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        isAuthenticated: false,\r\n        user: null,\r\n        error: action.payload,\r\n      };\r\n\r\n    case LOAD_USER_FAIL:\r\n      return {\r\n        ...initialState, // ✅ Reset state when loading user fails\r\n        error: action.payload,\r\n      };\r\n\r\n    case LOGOUT_FAIL:\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n      };\r\n\r\n    case CLEAR_ERRORS:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const forgotPasswordReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FORGOT_PASSWORD_REQUEST:\r\n    case NEW_PASSWORD_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading:true,\r\n        error: null,\r\n      };\r\n\r\n    case FORGOT_PASSWORD_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading:false,\r\n        message: action.payload,\r\n      };\r\n\r\n    case NEW_PASSWORD_SUCCESS:\r\n      return{\r\n        ...state,\r\n        loading:false,\r\n        user:action.payload.user,\r\n        success:action.payload\r\n      }\r\n\r\n    case FORGOT_PASSWORD_FAIL:\r\n    case NEW_PASSWORD_FAIL:\r\n      return {\r\n        ...state,\r\n        loading:false,\r\n        error: action.payload,\r\n      };\r\n\r\n    case CLEAR_ERRORS:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        message:null\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n"],"mappings":"AAAA,SACEA,aAAa,EACbC,aAAa,EACbC,UAAU,EACVC,YAAY,EACZC,qBAAqB,EACrBC,qBAAqB,EACrBC,kBAAkB,EAClBC,iBAAiB,EACjBC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,uBAAuB,EACvBC,uBAAuB,EACvBC,oBAAoB,EACpBC,oBAAoB,EACpBC,oBAAoB,EACpBC,iBAAiB,QACZ,4BAA4B;AAEnC,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,GAC3CC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,GACxC,IAAI;AAER,MAAMG,YAAY,GAAG;EACnBC,IAAI,EAAEN,UAAU;EAChBO,OAAO,EAAE,KAAK;EACdC,eAAe,EAAE,CAAC,CAACR,UAAU;EAAE;EAC/BS,KAAK,EAAE;AACT,CAAC;AAED,OAAO,MAAMC,WAAW,GAAGA,CAACC,KAAK,GAAGN,YAAY,EAAEO,MAAM,KAAK;EAC3D,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAK/B,aAAa;IAClB,KAAKI,qBAAqB;IAC1B,KAAKG,iBAAiB;MACpB,OAAO;QACL,GAAGsB,KAAK;QACRJ,OAAO,EAAE;MACX,CAAC;IAEH,KAAKxB,aAAa;IAClB,KAAKI,qBAAqB;IAC1B,KAAKG,iBAAiB;MACpBW,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEX,IAAI,CAACY,SAAS,CAACH,MAAM,CAACI,OAAO,CAAC,CAAC,CAAC,CAAC;MAC9D,OAAO;QACL,GAAGL,KAAK;QACRJ,OAAO,EAAE,KAAK;QACdC,eAAe,EAAE,IAAI;QACrBF,IAAI,EAAEM,MAAM,CAACI;MACf,CAAC;IACH,KAAKxB,cAAc;MACjBS,YAAY,CAACgB,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;MACjC,OAAO;QACL,GAAGZ;MACL,CAAC;IAEH,KAAKrB,UAAU;IACf,KAAKI,kBAAkB;MACrB,OAAO;QACL,GAAGuB,KAAK;QACRJ,OAAO,EAAE,KAAK;QACdC,eAAe,EAAE,KAAK;QACtBF,IAAI,EAAE,IAAI;QACVG,KAAK,EAAEG,MAAM,CAACI;MAChB,CAAC;IAEH,KAAKzB,cAAc;MACjB,OAAO;QACL,GAAGc,YAAY;QAAE;QACjBI,KAAK,EAAEG,MAAM,CAACI;MAChB,CAAC;IAEH,KAAKvB,WAAW;MACd,OAAO;QACL,GAAGkB,KAAK;QACRF,KAAK,EAAEG,MAAM,CAACI;MAChB,CAAC;IAEH,KAAK/B,YAAY;MACf,OAAO;QACL,GAAG0B,KAAK;QACRF,KAAK,EAAE;MACT,CAAC;IAEH;MACE,OAAOE,KAAK;EAChB;AACF,CAAC;AAED,OAAO,MAAMO,qBAAqB,GAAGA,CAACP,KAAK,GAAG,CAAC,CAAC,EAAEC,MAAM,KAAK;EAC3D,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKnB,uBAAuB;IAC5B,KAAKG,oBAAoB;MACvB,OAAO;QACL,GAAGc,KAAK;QACRJ,OAAO,EAAC,IAAI;QACZE,KAAK,EAAE;MACT,CAAC;IAEH,KAAKd,uBAAuB;MAC1B,OAAO;QACL,GAAGgB,KAAK;QACRJ,OAAO,EAAC,KAAK;QACbY,OAAO,EAAEP,MAAM,CAACI;MAClB,CAAC;IAEH,KAAKlB,oBAAoB;MACvB,OAAM;QACJ,GAAGa,KAAK;QACRJ,OAAO,EAAC,KAAK;QACbD,IAAI,EAACM,MAAM,CAACI,OAAO,CAACV,IAAI;QACxBc,OAAO,EAACR,MAAM,CAACI;MACjB,CAAC;IAEH,KAAKpB,oBAAoB;IACzB,KAAKG,iBAAiB;MACpB,OAAO;QACL,GAAGY,KAAK;QACRJ,OAAO,EAAC,KAAK;QACbE,KAAK,EAAEG,MAAM,CAACI;MAChB,CAAC;IAEH,KAAK/B,YAAY;MACf,OAAO;QACL,GAAG0B,KAAK;QACRF,KAAK,EAAE,IAAI;QACXU,OAAO,EAAC;MACV,CAAC;IAEH;MACE,OAAOR,KAAK;EAChB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}