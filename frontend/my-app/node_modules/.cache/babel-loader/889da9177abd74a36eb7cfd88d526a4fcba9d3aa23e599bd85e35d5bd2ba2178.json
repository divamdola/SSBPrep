{"ast":null,"code":"import axiosInstance from \"../utils/axiosInstance\";\nimport { persistor } from \"../store\";\nimport { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAIL, CLEAR_ERRORS, REGISTER_USER_REQUEST, REGISTER_USER_SUCCESS, REGISTER_USER_FAIL, LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOAD_USER_FAIL, LOGOUT_SUCCESS, LOGOUT_FAIL, FORGOT_PASSWORD_REQUEST, FORGOT_PASSWORD_SUCCESS, FORGOT_PASSWORD_FAIL, NEW_PASSWORD_REQUEST, NEW_PASSWORD_SUCCESS, NEW_PASSWORD_FAIL } from \"../constants/userConstants\";\n\n// Register User\nexport const register = userData => async dispatch => {\n  try {\n    dispatch({\n      type: REGISTER_USER_REQUEST\n    });\n    const config = {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    };\n    const {\n      data\n    } = await axiosInstance.post(\"/register\", userData, config);\n    dispatch({\n      type: REGISTER_USER_SUCCESS,\n      payload: data.user\n    });\n  } catch (error) {\n    var _error$response, _error$response$data;\n    console.error(\"Registration error:\", error);\n    dispatch({\n      type: REGISTER_USER_FAIL,\n      payload: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Registration failed. Please try again.\"\n    });\n  }\n};\n\n// Login\nexport const login = (email, password) => async dispatch => {\n  try {\n    dispatch({\n      type: LOGIN_REQUEST\n    });\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const {\n      data\n    } = await axiosInstance.post(\"/login\", {\n      email,\n      password\n    }, config);\n    localStorage.setItem(\"token\", data.token);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: data.user\n    });\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Invalid credentials\"\n    });\n  }\n};\n\n// Logout User\nexport const logout = () => async dispatch => {\n  try {\n    await axiosInstance.post(\"/logout\");\n    dispatch({\n      type: LOGOUT_SUCCESS\n    });\n    await persistor.flush();\n    persistor.purge();\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    window.location.reload();\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    dispatch({\n      type: LOGOUT_FAIL,\n      payload: ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"Logout failed\"\n    });\n  }\n};\n\n// Load User\nexport const loadUser = () => async dispatch => {\n  try {\n    dispatch({\n      type: LOAD_USER_REQUEST\n    });\n    const token = localStorage.getItem(\"token\");\n    if (!token) throw new Error(\"No token found\");\n    const {\n      data\n    } = await axiosInstance.get(\"/me\");\n    dispatch({\n      type: LOAD_USER_SUCCESS,\n      payload: data.user\n    });\n  } catch (error) {\n    var _error$response4, _error$response5, _error$response5$data;\n    console.error(\"❌ Load User Failed:\", (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data);\n    dispatch({\n      type: LOAD_USER_FAIL,\n      payload: ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || \"Failed to load user\"\n    });\n  }\n};\n\n//Forgot Password\nexport const forgotPassword = email => async dispatch => {\n  try {\n    dispatch({\n      type: FORGOT_PASSWORD_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axiosInstance.post(\"/password/forgot\", {\n      email\n    }, config);\n    dispatch({\n      type: FORGOT_PASSWORD_SUCCESS,\n      payload: data.message\n    });\n  } catch (error) {\n    dispatch({\n      type: FORGOT_PASSWORD_FAIL,\n      payload: error.response.data.message\n    });\n  }\n};\n\n//Reset Password\nexport const resetPassword = (token, passwords) => async dispatch => {\n  try {\n    dispatch({\n      type: NEW_PASSWORD_REQUEST\n    });\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axiosInstance.put(`/password/reset/${token}`, passwords, config);\n    dispatch({\n      type: NEW_PASSWORD_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: NEW_PASSWORD_FAIL,\n      payload: error.response.data.message\n    });\n  }\n};\n\n// Clear Errors\nexport const clearError = () => async dispatch => {\n  dispatch({\n    type: CLEAR_ERRORS\n  });\n};","map":{"version":3,"names":["axiosInstance","persistor","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAIL","CLEAR_ERRORS","REGISTER_USER_REQUEST","REGISTER_USER_SUCCESS","REGISTER_USER_FAIL","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOAD_USER_FAIL","LOGOUT_SUCCESS","LOGOUT_FAIL","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAIL","NEW_PASSWORD_REQUEST","NEW_PASSWORD_SUCCESS","NEW_PASSWORD_FAIL","register","userData","dispatch","type","config","headers","data","post","payload","user","error","_error$response","_error$response$data","console","response","message","login","email","password","localStorage","setItem","token","_error$response2","_error$response2$data","logout","flush","purge","removeItem","window","location","reload","_error$response3","_error$response3$data","loadUser","getItem","Error","get","_error$response4","_error$response5","_error$response5$data","forgotPassword","resetPassword","passwords","put","success","clearError"],"sources":["C:/Users/divya/Desktop/Projects/SSBPrep/frontend/my-app/src/actions/userActions.js"],"sourcesContent":["import axiosInstance from \"../utils/axiosInstance\";\r\nimport { persistor } from \"../store\";\r\n\r\nimport {\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  CLEAR_ERRORS,\r\n  REGISTER_USER_REQUEST,\r\n  REGISTER_USER_SUCCESS,\r\n  REGISTER_USER_FAIL,\r\n  LOAD_USER_REQUEST,\r\n  LOAD_USER_SUCCESS,\r\n  LOAD_USER_FAIL,\r\n  LOGOUT_SUCCESS,\r\n  LOGOUT_FAIL,\r\n  FORGOT_PASSWORD_REQUEST,\r\n  FORGOT_PASSWORD_SUCCESS,\r\n  FORGOT_PASSWORD_FAIL,\r\n  NEW_PASSWORD_REQUEST,\r\n  NEW_PASSWORD_SUCCESS,\r\n  NEW_PASSWORD_FAIL,\r\n} from \"../constants/userConstants\";\r\n\r\n// Register User\r\nexport const register = (userData) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: REGISTER_USER_REQUEST });\r\n\r\n    const config = { headers: { \"Content-Type\": \"multipart/form-data\" } };\r\n\r\n    const { data } = await axiosInstance.post(\"/register\", userData, config);\r\n\r\n    dispatch({ type: REGISTER_USER_SUCCESS, payload: data.user });\r\n  } catch (error) {\r\n    console.error(\"Registration error:\", error);\r\n    dispatch({\r\n      type: REGISTER_USER_FAIL,\r\n      payload: error.response?.data?.message || \"Registration failed. Please try again.\",\r\n    });\r\n  }\r\n};\r\n\r\n// Login\r\nexport const login = (email, password) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: LOGIN_REQUEST });\r\n\r\n    const config = { headers: { \"Content-Type\": \"application/json\" } };\r\n\r\n    const { data } = await axiosInstance.post(\"/login\", { email, password }, config);\r\n\r\n    localStorage.setItem(\"token\", data.token);\r\n\r\n    dispatch({ type: LOGIN_SUCCESS, payload: data.user });\r\n  } catch (error) {\r\n    dispatch({ type: LOGIN_FAIL, payload: error.response?.data?.message || \"Invalid credentials\" });\r\n  }\r\n};\r\n\r\n\r\n// Logout User\r\nexport const logout = () => async (dispatch) => {\r\n  try {\r\n    await axiosInstance.post(\"/logout\");\r\n\r\n    dispatch({ type: LOGOUT_SUCCESS });\r\n\r\n    await persistor.flush();\r\n    persistor.purge();\r\n\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"user\");\r\n\r\n    window.location.reload();\r\n  } catch (error) {\r\n    dispatch({\r\n      type: LOGOUT_FAIL,\r\n      payload: error.response?.data?.message || \"Logout failed\",\r\n    });\r\n  }\r\n};\r\n\r\n\r\n// Load User\r\nexport const loadUser = () => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: LOAD_USER_REQUEST });\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (!token) throw new Error(\"No token found\");\r\n\r\n    const { data } = await axiosInstance.get(\"/me\");\r\n\r\n    dispatch({ type: LOAD_USER_SUCCESS, payload: data.user });\r\n  } catch (error) {\r\n    console.error(\"❌ Load User Failed:\", error.response?.data);\r\n    dispatch({\r\n      type: LOAD_USER_FAIL,\r\n      payload: error.response?.data?.message || \"Failed to load user\",\r\n    });\r\n  }\r\n};\r\n\r\n\r\n//Forgot Password\r\nexport const forgotPassword = (email)=>async(dispatch)=>{\r\n  try{\r\n    dispatch({type:FORGOT_PASSWORD_REQUEST})\r\n\r\n    const config={\r\n      headers:{\r\n        'Content-Type':'application/json'\r\n      }\r\n    }\r\n    const { data } = await axiosInstance.post(\"/password/forgot\", {email}, config);\r\n    dispatch({\r\n      type:FORGOT_PASSWORD_SUCCESS,\r\n      payload:data.message\r\n    })\r\n  }catch(error){\r\n    dispatch({\r\n      type:FORGOT_PASSWORD_FAIL,\r\n      payload:error.response.data.message\r\n    })\r\n  }\r\n}\r\n\r\n//Reset Password\r\nexport const resetPassword = (token,passwords)=>async(dispatch)=>{\r\n  try{\r\n    dispatch({type:NEW_PASSWORD_REQUEST})\r\n\r\n    const config={\r\n      headers:{\r\n        'Content-Type':'application/json'\r\n      }\r\n    }\r\n    const { data } = await axiosInstance.put(`/password/reset/${token}`, passwords, config);\r\n    dispatch({\r\n      type:NEW_PASSWORD_SUCCESS,\r\n      payload:data.success\r\n    })\r\n  }catch(error){\r\n    dispatch({\r\n      type:NEW_PASSWORD_FAIL,\r\n      payload:error.response.data.message\r\n    })\r\n  }\r\n}\r\n\r\n// Clear Errors\r\nexport const clearError = () => async (dispatch) => {\r\n  dispatch({ type: CLEAR_ERRORS });\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}